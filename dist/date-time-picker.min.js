!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DateTimePicker=e():t.DateTimePicker=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(10);n.Date=i(16),n.Time=i(17),t.exports=n},function(t,e,i){var n=i(4),a=i(9),s=i(8);t.exports=n.extend({},n,a,s)},function(t,e,i){var n=i(1),a={on:function(t,e){this._eventData||(this._eventData={}),this._eventData[t]||(this._eventData[t]=[]);var i=!1;return n.each(this._eventData[t],function(t){if(t===e)return i=!0,!1}),i||this._eventData[t].push(e),this},once:function(t,e){var i=this,n=function(){e.apply(this,arguments),i.off(t,n)};return this.on(t,n),this},off:function(t,e){return this._eventData||(this._eventData={}),this._eventData[t]&&this._eventData[t].length?(e?n.each(this._eventData[t],function(i,n){if(i===e)return this._eventData[t].splice(n,1),!1}):this._eventData[t]=[],this):this},trigger:function(t){if(this._eventData||(this._eventData={}),!this._eventData[t])return this;var e=this._eventData[t].slice.call(arguments,1);return n.each(this._eventData[t],function(t){t.apply(null,e)}),this}};t.exports=a},function(t,e,i){function n(t){this.options=s.extend({"default":new Date,type:"M"},t||{});var e=s.toDate(this.options["default"]);e||(e=new Date),this.updateNow(e)}function a(t){return{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),day:t.getDay(),hours:t.getHours(),minutes:t.getMinutes()}}var s=i(1),r=i(2),o={C:{value:"year",rows:function(t){for(var e=[],i=1900,n=2100,a=i;a<=n;)e.push([a++]);return e},input:"setFullYear"},Y:{value:"month",rows:function(t){for(var e=[],i=0,n=11,a=i;a<=n;)e.push([a++]);return e},input:"setMonth"},M:{value:"date",rows:function(t){for(var e=[],i=t.now,n=s.getDaysInMonthOfDate(i),a=0,r=1,o=s.getFirstDayOfMonth(t.now),c=null;r<=n;)a%7===0&&(c=[],e.push(c)),c.push(a<o?0:r++),a++;return e},input:"setDate"},W:{value:"date",rows:function(t){for(var e=[],i=t.parsedNow,n=s.getStartDateOfWeek(i.year,i.month,i.date),a=1,r=[];a++<=7;)r.push(n.getDate()),n=s.nextDate(n);return e.push(r),e},input:function(t,e){var i=e.now,n=e.parsedNow,a=s.toDate(i),r=n.date;return Math.abs(t-r)<7?a.setDate(t):t>r?(a.setDate(t),a=s.nextMonth(a)):(a.setDate(t),a=s.prevMonth(a)),a}},D:{value:"hours",rows:function(t){for(var e=[],i=0,n=23,a=i;a<=n;)e.push([a++]);return e},input:"setHours"},H:{value:"minutes",rows:function(t){for(var e=[],i=0,n=59,a=i;a<=n;)e.push([a++]);return e},input:"setMinutes"}};s.each(o,function(t){var e=t.input;s.isStr(e)&&(t.input=function(t,i){var n=i.now,a=s.toDate(n);return a[e](t),a})}),s.extend(n.prototype,{updateNow:function(t){this.now=new Date(t.getTime()),this.parsedNow=a(this.now)},_getConf:function(){return o[this.options.type]||o.M},getRows:function(){var t=this._getConf();return t.rows(this)},getInputValue:function(t){var e=this._getConf();return e.input(t,this)},getLevelValue:function(){var t=this._getConf();return this.parsedNow[t.value]},destroy:function(){this.now=null,this.parsedNow=null,this.options=null}},r),t.exports=n},function(t,e){function i(t,e){return f.toString.call(t)==="[object "+e+"]"}function n(t){return i(t,"Function")}function a(t){return i(t,"String")}function s(t){return i(t,"Number")}function r(t){return i(t,"Object")}function o(t){return Array.isArray?Array.isArray(t):i(t,"Array")}function c(t){return"undefined"==typeof t}function h(t){return i(t,"Date")}function l(t,e,i){if(t&&n(e))if(i=i||t,t.length){for(var a=0,s=t.length;a<s;a++)if(e.call(i,t[a],a,t)===!1)return}else if(r(t))for(var o in t)if(e.call(i,t[o],o,t)===!1)return}function u(){}function d(t){return!(!t||!r(t))&&"isPrototypeOf"in t}function p(){var t,e,i,a,s=arguments[0]||{},r=1,c=arguments.length,h=!1;for("boolean"==typeof arguments[0]&&(h=s,s=arguments[1]||{},r=2),"object"==typeof s||n(s)||(s={});r<c;r++)if(null!=(t=arguments[r]))for(e in t)if(i=s[e],a=t[e],s!==a)if(h&&a&&(d(a)||o(a))){var l=i&&(d(i)||o(i))?i:o(a)?[]:{};s[e]=p(h,l,a)}else void 0!==a&&(s[e]=a);return s}function m(t,e,i){if(e<1)return"";"undefined"==typeof i&&(i=!0),t=""+t;for(var n=0;n<e;)t="0"+t,n+=1;return n=t.length-e,t.substring(i?n:n>0?e:n)}var f=Object.prototype;t.exports={isFn:n,isStr:a,isNum:s,isObj:r,isArray:o,isDate:h,isUndefined:c,each:l,noop:u,extend:p,pad:m}},function(t,e,i){function n(t,e){this.container=document.body,t||(t={}),this.lang=t.lang||"EN",this.lang=t.lang;var i=o[this.lang];i||(i=o.EN),this.config=a.extend(i,e||{}),this.formatValue=null,this.options=t,this.needDefFormat=!this.options.format,this.init(),this.options.format&&a.isStr(this.options["default"])&&(this.options["default"]=a.parseDate(this.options["default"],this.options.format)),this._init()}var a=i(1),s=i(2),r=i(3),o=i(11);n.extend=function(t,e){var i=function(){};return i.prototype=n.prototype,t.prototype=new i,t.prototype["super"]=n.prototype,t.prototype.constructor=t,a.extend(t.prototype,e||{}),t},a.extend(n.prototype,{setDateTime:function(t){this.dateTime=new r(this.options),this._setDateTime(t),t?this.selfChange():(this.render(),this.afterRender())},selfChange:a.noop,setNow:function(t){this.options["default"]=t,this.setDateTime()},afterRender:a.noop,_setDateTime:a.noop,init:a.noop,_init:function(){this._initEle(),this.bindEvts(),this.setDateTime()},_initEle:function(){var t=document.createElement("div");t.className="picker-container",this.ele=t,this._initHead(),this._initContent(),this._initFoot(),this.initEle(),this._handleAni(),this.container.appendChild(t)},initEle:a.noop,render:function(){this.panel&&this.panel.render()},_initHead:function(){this.head=document.createElement("div"),this.head.className="picker-head",this.ele.appendChild(this.head)},_initContent:function(){this.content=document.createElement("div"),this.content.className="picker-content",this.content.setAttribute("data-touchstart","_start"),this.ele.appendChild(this.content)},_initFoot:function(){this.foot=document.createElement("div"),this.foot.className="picker-foot",this.foot.innerHTML='<a href="javascript:;" class="picker-act picker-act-0" data-click="cancel">'+this.config.CANCEL+'</a><a href="javascript:;" class="picker-act picker-act-1" data-click="ok">'+this.config.OK+"</a>",this.ele.appendChild(this.foot)},_handleAni:function(){var t=this.ele,e=function(){t.classList.remove("time-picker-ani"),t.removeEventListener(a.prefixNames.aniEnd,e,!1)};t.classList.add("time-picker-ani"),t.addEventListener(a.prefixNames.aniEnd,e,!1)},_addEvt:function(t,e,i){t&&e&&(void 0===i&&(i=!1),t.addEventListener(e,this,i))},_removeEvt:function(t,e,i){t&&e&&(void 0===i&&(i=!1),t.removeEventListener(e,this,i))},desEvts:function(){this._removeEvt(this.ele,"click"),this._removeEvt(this.ele,"touchstart")},bindEvts:function(){this._addEvt(this.ele,"click"),this._addEvt(this.ele,"touchstart")},changeTo:function(t,e){this.options["default"]=this.dateTime.getInputValue(t),this.setDateTime(e)},selV:function(t){var e=t.realTarget,i=e.getAttribute("data-val")-0;this.shouldSet(i)&&this.changeTo(i)},shouldSet:function(t){return!0},cancel:function(){this.trigger("canceled"),this.hide(),this.destroy()},ok:function(){var t=this.dateTime.now,e=this.options.format;e&&(t=a.formatDate(t,e)),this.trigger("selected",t,this.dateTime.now),this.hide(),this.destroy()},handleEvent:function(t){for(var e="data-"+t.type,i=t.target,n="";i&&i!==this.ele&&!(n=i.getAttribute(e));)i=i.parentNode;n&&(t.realTarget=i,this.panel&&this.panel[n]?this.panel[n](t):this[n]&&this[n](t))},show:function(){this.ele&&(this.ele.style.display="block")},hide:function(){this.ele&&(this.ele.style.display="none")},destroy:function(){this.trigger("destroy"),this.hide(),this.desEvts(),this.container.removeChild(this.ele),this.dateTime.destroy(),this.panel&&this.panel.destroy(),this.container=null,this.ele=null,this.head=null,this.content=null,this.foot=null,this.dateTime=null,this.panel=null,this.config=null,this.formatValue=null,this.lang=null}},s),t.exports=n},function(t,e,i){function n(t,e){var i,n={},a=e.indexOf("a")!==-1||e.indexOf("A")!==-1;return n.d=t.getDate(),n.dd=o(n.d,2),i=t.getDay(),n.D=i,n.DD=i,n.M=t.getMonth()+1,i=n.M,n.MM=o(i,2),n.yyyy=t.getFullYear(),i=n.yyyy,n.yyy=o(i,2)+"y",n.yy=o(i,2),n.y="y",n.H=t.getHours(),i=n.H,n.hh=o(a?s(i):i,2),n.h=a?s(i):i,n.HH=o(i,2),i=n.H<12,n.ap=i?"am":"pm",n.a=i?"am":"pm",n.AP=i?"AM":"PM",n.A=i?"AM":"PM",n.m=t.getMinutes(),n.mm=o(n.m,2),n.s=t.getSeconds(),n.ss=o(n.s,2),n.z=t.getMilliseconds(),i=n.z,n.zz=i+"z",n.zzz=o(i,3),e.replace(c,function(t,e){var i=n[e];return void 0===i?e:i})}function a(t,e){for(var i,n=h,a="",s=0,o=[""],c="",l=new Date(2e3,0,1);s<e.length;){for(c=e.charAt(s);s+1<e.length&&void 0!==n[c+e.charAt(s+1)];)c+=e.charAt(++s);void 0!==(i=n[c])?""!==i&&(a+=n[c],o.push(c)):a+=c,s++}a=new RegExp(a);var u=t.match(a),d=o.length;if(!u||u.length!==d)return null;for(s=0;s<d;s++)if(""!==(c=o[s]))switch(i=parseInt(u[s],10),c){case"yyyy":case"yyy":l.setYear(i);break;case"yy":l.setYear(2e3+i);break;case"MM":case"M":l.setMonth(i-1);break;case"dd":case"d":l.setDate(i);break;case"hh":case"h":case"HH":case"H":l.setHours(i);break;case"mm":case"m":l.setMinutes(i);break;case"ss":case"s":l.setSeconds(i);break;case"zzz":case"zz":case"z":l.setMilliseconds(i);break;case"AP":case"A":case"ap":case"a":l.setHours(r(l.getHours(),u[s]))}return l}function s(t){return t%12===0?12:t%12}function r(t,e){return e=e.toLowerCase(),t=parseInt(t,10),"pm"===e?t<12?t+12:t:12===t?0:t}var o=i(4).pad,c=/(?:\b|%)([dDMyHhaAmsz]+|ap|AP)(?:\b|%)/g,h={d:"([0-9][0-9]?)",dd:"([0-9][0-9])",M:"([0-9][0-9]?)",MM:"([0-9][0-9])",yyyy:"([0-9][0-9][0-9][0-9])",yyy:"([0-9][0-9])[y]",yy:"([0-9][0-9])",H:"([0-9][0-9]?)",hh:"([0-9][0-9])",h:"([0-9][0-9]?)",HH:"([0-9][0-9])",m:"([0-9][0-9]?)",mm:"([0-9][0-9])",s:"([0-9][0-9]?)",ss:"([0-9][0-9])",z:"([0-9][0-9]?[0-9]?)",zz:"([0-9][0-9]?[0-9]?)[z]",zzz:"([0-9][0-9][0-9])",ap:"([ap][m])",a:"([ap][m])",AP:"([AP][M])",A:"([AP][M])","%":""};t.exports={format:n,parse:a}},function(t,e,i){var n=i(3),a=i(2),s=i(1);t.exports={DateTime:n,events:a,utils:s}},function(t,e){var i={aniEnd:"animationend",transform:"transform"};!function(){for(var t,e=document.createElement("div"),n=e.style,a=["a","webkitA","MozA","OA","msA"],s=["animationend","webkitAnimationEnd","animationend","oAnimationEnd","MSAnimationEnd"],r=["transform","webkitTransform","MozTransform","OTransform","msTransform"],o=0,c=a.length;o<c;o++)t=a[o]+"nimation",t in n&&(i.aniEnd=s[o],i.transform=r[o])}(),i.transitionEnd=i.aniEnd.replace("AnimationEnd","TransitionEnd").replace("animationend","transitionend"),t.exports={prefixNames:i}},function(t,e,i){function n(t){return t instanceof Date?new Date(t.getTime()):(t=new Date(t),isNaN(t.getTime())?null:t)}function a(t,e){return t=n(t),t?v.format(t,e||y):""}function s(t,e){return v.parse(t,e||y)}function r(t,e){var i=[3,5,8,10];return~i.indexOf(e)?30:1===e?t%4===0&&t%100!==0||t%400===0?29:28:31}function o(t){return t.getDaysInMonth?t.getDaysInMonth():r(t.getFullYear(),t.getMonth())}function c(t){return t=new Date(t.getTime()),t.setDate(1),t.getDay()}function h(t,e){var i=new Date(t,e,1),n=i.getDay();return 0===n?i.setTime(i.getTime()-7*g):i.setTime(i.getTime()-g*n),i}function l(t,e,i){i=new Date(t,e,i);var n=i.getDay();return i.setTime(i.getTime()-g*n),i}function u(t){t=new Date(t.getTime()),t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/g-3+(e.getDay()+6)%7)/7)}function d(t){t=new Date(t.getTime());var e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),a=0===i?e-1:e,s=0===i?11:i-1,o=r(a,s);return o<n&&t.setDate(o),t.setMonth(s),t.setFullYear(a),t}function p(t){t=new Date(t.getTime());var e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),a=11===i?e+1:e,s=11===i?0:i+1,o=r(a,s);return o<n&&t.setDate(o),t.setMonth(s),t.setFullYear(a),t}function m(t){var e=t.getTime();return t=new Date(e),t.setTime(e-g),t}function f(t){var e=t.getTime();return t=new Date(e),t.setTime(e+g),t}var v=i(6),y="yyyy-MM-dd",g=864e5;t.exports={toDate:n,formatDate:a,parseDate:s,getDaysInMonth:r,getDaysInMonthOfDate:o,getFirstDayOfMonth:c,getStartDateOfMonth:h,getStartDateOfWeek:l,getWeekNumber:u,prevMonth:d,nextMonth:p,prevDate:m,nextDate:f}},function(t,e,i){i(12),t.exports={Core:i(7)}},function(t,e){t.exports={"zh-CN":{day:["周日","周一","周二","周三","周四","周五","周六"],shortDay:["日","一","二","三","四","五","六"],MDW:"M月d日D",YM:"yyyy年M月",OK:"确定",CANCEL:"取消"},EN:{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortDay:["S","M","T","W","T","F","S"],MDW:"D, MM-d",YM:"yyyy-M",OK:"OK",CANCEL:"CANCEL"}}},function(t,e){},function(t,e,i){function n(t){this.picker=t,this.main=null,this.mainStyle=null,this.arrow=null,this.arrowStyle=null}function a(t,e,i){var n=new Date,a={year:n.getFullYear(),month:n.getMonth(),date:n.getDate()},r=t.parsedNow;return i=" picker-bdy-"+i,'<div class="picker-bdy'+i+'"><div class="date-picker-title">'+s.formatDate(t.now,e.YM)+'</div><div class="date-picker-days"><div class="date-picker-days-title">'+e.shortDay.map(function(t){return"<i>"+t+"</i>"}).join("")+'</div><div class="date-picker-days-bdy">'+t.getRows().map(function(t){return'<div class="picker-row">'+t.map(function(t){var e=r.year===a.year&&r.month===a.month&&t===a.date?"picker-now":"";return t===r.date&&(e?e+=" picker-active":e="picker-active"),e&&(e=' class="'+e+'"'),'<i data-click="selV" data-val="'+t+'" '+e+"><span>"+t+"</span></i>"}).join("")+"</div>"}).join("")+"</div></div></div>"}var s=i(1);s.extend(n.prototype,{render:function(){this.main||this._init(),this.picker.head.innerHTML='<div class="picker-year" data-click="toYears">'+this.picker.dateTime.parsedNow.year+'</div><div class="picker-date picker-head-active" data-click="toMonths">'+s.formatDate(this.picker.dateTime.now,this.picker.config.MDW.replace("D","#")).replace("#",this.picker.config.day[this.picker.dateTime.parsedNow.day])+"</div>",this.main.innerHTML=a(this.picker.prevDateTime,this.picker.config,"prev")+a(this.picker.dateTime,this.picker.config,"curr")+a(this.picker.nextDateTime,this.picker.config,"next")},_init:function(){this._initMain(),this._initArrow()},_initMain:function(){this.main=document.createElement("div"),this.main.className="date-picker-main",this.mainStyle=this.main.style,this.picker.content.appendChild(this.main),this.mainWidth=this.main.offsetWidth},_initArrow:function(){this.arrow=document.createElement("div"),this.arrow.className="picker-actions-arrow",this.arrow.innerHTML='<i data-click="prevMonth">←</i><i data-click="nextMonth">→</i>',this.arrowStyle=this.arrow.style,this.picker.content.appendChild(this.arrow)},show:function(){this.mainStyle.display="block",this.arrowStyle.display="block"},hide:function(){this.mainStyle.display="none",this.arrowStyle.display="none"},_slideTo:function(t,e,i){var n=this,a=3,r=a*Math.abs(t-e),o=null,c=function(){window.clearTimeout(o),n._slideEndFn&&(n._slideEndFn=null,n.main.removeEventListener(s.prefixNames.transitionEnd,c,!1),n.mainStyle.webkitTransition="none 0ms",n.mainStyle.transition="none 0ms",n.mainStyle[s.prefixNames.transform]="translateX(-100%) translateZ(0)",i&&i.call(n))};this._slideEndFn=c,this.mainStyle[s.prefixNames.transform]="translateX("+t+"%) translateZ(0)",r>0?(o=window.setTimeout(c,r),r+="ms",this.mainStyle.webkitTransition=r,this.mainStyle.transition=r):c(),this.main.addEventListener(s.prefixNames.transitionEnd,c,!1)},_befChange:function(t){return s.isNum(t)||(t=-100),this._slideEndFn&&this._slideEndFn(),t},prevMonth:function(t){t=this._befChange(t),this._slideTo(0,t,function(){this.picker.setNowToPrev()})},nextMonth:function(t){t=this._befChange(t),this._slideTo(-200,t,function(){this.picker.setNowToNext()})},_start:function(t){var e=t.touches[0],i=e.pageX,n=this,a=-100,r=0,o=!1,c=function(t){t.preventDefault(),t.stopPropagation();var e=t.touches[0],c=e.pageX-i;c=100*c/n.mainWidth;var h=Math.abs(c);h>100&&(c=c>0?100:-100),o=h>55,r=a+c,n.arrowStyle.opacity=(100-.9*h)/100,n.mainStyle[s.prefixNames.transform]="translateX("+r+"%) translateZ(0)"},h=function(t){n.arrowStyle.opacity=1,o?n[r>a?"prevMonth":"nextMonth"](r):n._slideTo(a,r),document.removeEventListener("touchmove",c,!1),document.removeEventListener("touchend",h,!1),document.removeEventListener("touchcancel",h,!1)};this._slideEndFn&&this._slideEndFn(),document.addEventListener("touchmove",c,!1),document.addEventListener("touchend",h,!1),document.addEventListener("touchcancel",h,!1)},destroy:function(){this._slideEndFn&&this._slideEndFn(),this.picker.content.removeChild(this.main),this.picker.content.removeChild(this.arrow),this.picker=null,this.main=null,this.mainStyle=null,this.arrow=null,this.arrowStyle=null}}),t.exports=n},function(t,e,i){function n(t){this.picker=t,this.main=null,this.mainStyle=null,this.posY=0,this.type=t.options.type}function a(t,e){return e||(e=function(t){return t}),function(i,n){var a=i.parsedNow[t];return"<ul>"+n.map(function(t){var i=t[0],n="";return i===a&&(n=" picker-active"),'<li class="picker-row'+n+'" data-click="selV" data-val="'+i+'">'+e(i)+"</li>"}).join("")+"</ul>"}}function s(t){var e=window.getComputedStyle(t,null);e=e[o.prefixNames.transform].split(")")[0].split(", ");var i=+(e[13]||e[5]);return i}function r(t,e,i){var n=6e-4,a=t-e,s=Math.abs(a)/i,r=t+s*s/(2*n)*(a<0?-1:1);return{destination:r,speed:s}}var o=i(1),c={C:a("year"),Y:a("month",function(t){return t+1})};o.extend(n.prototype,{render:function(){this.main||this._init();var t="C"===this.type;this.picker.head.innerHTML='<div class="picker-year'+(t?" picker-head-active":"")+'"'+(t?"":' data-click="toYears"')+">"+this.picker.dateTime.parsedNow.year+'</div><div class="picker-date" data-click="toDays">'+o.formatDate(this.picker.dateTime.now,this.picker.config.MDW.replace("D","#")).replace("#",this.picker.config.day[this.picker.dateTime.parsedNow.day])+"</div>",this.main.innerHTML=c[this.type](this.picker.dateTime,this.rows),this._afterRender()},_afterRender:function(){var t=this.main.querySelector(".picker-active");this.itemHeight=t.offsetHeight;var e=t.offsetTop-(this.contentHeight-this.itemHeight)/2;this._slideTo(-e,0)},_init:function(){this.rows=this.picker.dateTime.getRows(),this._initMain(),this._initMidd()},_initMain:function(){this.main=document.createElement("div"),this.main.className="scroller-picker-main",this.mainStyle=this.main.style,this.picker.content.appendChild(this.main),this.contentHeight=this.picker.content.offsetHeight},_initMidd:function(){this.midd=document.createElement("div"),this.midd.className="scroller-picker-midd",this.middStyle=this.midd.style,this.picker.content.appendChild(this.midd)},show:function(){this.mainStyle.display="block",this.middStyle.display="block"},hide:function(){this.mainStyle.display="none",this.middStyle.display="none"},_slideTo:function(t,e,i){var n=this,a=null,s=function(t){window.clearTimeout(a),n._slideEndFn&&(n._slideEndFn=null,n.main.removeEventListener(o.prefixNames.transitionEnd,s,!1),n.mainStyle.webkitTransition="none 0ms",n.mainStyle.transition="none 0ms",i&&i.call(n,t))};this._slideEndFn=s,this.posY=t,this.mainStyle[o.prefixNames.transform]="translateY("+this.posY+"px) translateZ(0)";var r=" cubic-bezier(0.25, 0.46, 0.45, 0.94)";e>0?(a=window.setTimeout(function(){s({})},e),e+="ms",this.mainStyle.webkitTransition=e+r,this.mainStyle.transition=e+r,this.main.addEventListener(o.prefixNames.transitionEnd,s,!1)):s()},_start:function(t){this._slideEndFn&&this._slideEndFn();var e=t.touches[0],i=e.pageY,n=this,a=this.posY,c=0,h=(new Date).getTime(),l=a,u=function(t){t.preventDefault(),t.stopPropagation();var e=t.touches[0],s=e.pageY-i;c=a+s;var r=(new Date).getTime();r-h>300&&(h=r,l=c),n.mainStyle[o.prefixNames.transform]="translateY("+c+"px) translateZ(0)"},d=function(t){var e=t-a,i=Math.round(e/n.itemHeight),s=n.picker.dateTime.getLevelValue(),r=s-i,o=n.rows[0][0],c=n.rows[n.rows.length-1][0];r<o?(i=s-o,r=o):r>c&&(i=s-c,r=c);var h=i*n.itemHeight+a;return{realTo:h,targetV:r}},p=function(t){var e,i=(new Date).getTime(),a=i-h;if(a<300){var o=-n.rows.length*n.itemHeight,m=n.contentHeight;l<o?l=o:l>m&&(l=m);var f=r(c,l,a);c=f.destination,e=f.speed}var v=d(c),y=v.realTo,g=v.targetV;void 0===e?(e=100*Math.abs(y-c)/n.itemHeight,e>50&&(e=20)):e=Math.abs(y-l)/e,n._slideTo(y,e,function(t){if(t||!e)n.picker.changeTo(g);else{var i=d(s(n.main));n._slideTo(i.realTo,0,function(){n.picker.changeTo(i.targetV,!0)})}}),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",p,!1),document.removeEventListener("touchcancel",p,!1)};document.addEventListener("touchmove",u,!1),document.addEventListener("touchend",p,!1),document.addEventListener("touchcancel",p,!1)},destroy:function(){this._slideEndFn&&this._slideEndFn(),this.picker.content.removeChild(this.main),this.picker.content.removeChild(this.midd),this.picker=null,this.main=null,this.mainStyle=null,this.midd=null,this.middStyle=null}}),t.exports=n},function(t,e,i){function n(t){this.picker=t,this.main=null,this.mainStyle=null,this.headActiveEle=null,this.activeEle=null,this.pickerLineEle=null,this.type=t.options.type}function a(t,e,i){return e||(e=function(t,e,i){return'<i style="'+i(e,!0)+'">'+t+"</i>"}),i||(i=function(t){return t.length}),function(n,a){var s=a.length,r=i(a),o=r!==s,c=360/r,h="",l=1;"minutes"===t&&(l=n.options.minuteStep||5,h+="time-picker-minutes-"+l);var u=function(t,e){var i=c*t,n="";return e&&(i=-i,n="translate(-50%, -50%) "),n+="rotate("+i+"deg)","-webkit-transform:"+n+";transform:"+n+";"},d=n.parsedNow[t],p="",m="";return'<ul class="'+h+'">'+a.map(function(t,i){var n=t[0],a="";if(n===d){a=" picker-active";var s="rotate("+(c*i-90)+"deg)";p="-webkit-transform:"+s+";transform:"+s,o&&(!n||n>12)&&(m+=" time-picker-line-inner")}return l>1&&i%l!==0?"":(o&&(!n||n>12)&&(a+=" picker-cell-inner"),'<li class="picker-cell'+a+'" data-click="selV" data-val="'+n+'" style="'+u(i)+'">'+e(n,i,u)+"</li>")}).join("")+'</ul><div class="time-picker-line'+m+'" style="'+p+'"></div>'}}var s=i(1),r={D:a("hours",null,function(t){return t.length/2}),H:a("minutes",function(t,e,i){return e%5===0?'<i style="'+i(e,!0)+'">'+s.pad(t,2)+"</i>":"<b></b>"})};s.extend(n.prototype,{render:function(){this.main||this._init();var t="D"===this.type;this.picker.head.innerHTML='<div class="picker-hour'+(t?" picker-head-active":"")+'"'+(t?"":' data-click="toHours"')+">"+s.formatDate(this.picker.dateTime.now,"HH")+'</div>:<div class="picker-minute'+(t?"":" picker-head-active")+'"'+(t?' data-click="toMinutes"':"")+">"+s.formatDate(this.picker.dateTime.now,"mm")+"</div>",this.main.innerHTML=r[this.type](this.picker.dateTime,this.rows),this.afterRender()},afterRender:function(){this.headActiveEle=this.picker.head.querySelector(".picker-head-active"),this.activeEle=this.main.querySelector(".picker-active"),this.pickerLineEle=this.main.querySelector(".time-picker-line")},_init:function(){this.rows=this.picker.dateTime.getRows(),this._initMain()},_initMain:function(){this.main=document.createElement("div"),this.main.className="time-picker-main "+("D"===this.type?"time-picker-main-hours":"time-picker-main-minutes"),this.mainStyle=this.main.style,this.picker.content.appendChild(this.main)},show:function(){this.mainStyle.display="block"},hide:function(){this.mainStyle.display="none"},selfChange:function(){var t=this.picker.dateTime.getLevelValue();this.headActiveEle.innerHTML=s.pad(t,2);var e=this.main.querySelector('.picker-cell[data-val="'+t+'"]');this.activeEle&&this.activeEle.classList.remove("picker-active"),e.classList.add("picker-active"),this.activeEle=e;var i=+e.style[s.prefixNames.transform].match(/rotate\((-?\d+)deg\)/)[1];i-=90,this.pickerLineEle.style[s.prefixNames.transform]="rotate("+i+"deg)",this.pickerLineEle.classList[e.classList.contains("picker-cell-inner")?"add":"remove"]("time-picker-line-inner")},_start:function(t){var e=this,i=null,n=function(t){var n=document.elementFromPoint(t.pageX,t.pageY);(n&&n.classList.contains("picker-cell")||(n=n.parentElement)&&n.classList.contains("picker-cell"))&&(i=n,e.picker.changeTo(n.getAttribute("data-val"),!0))};n(t.touches[0]);var a=function(t){t.preventDefault(),t.stopPropagation(),n(t.touches[0])},s=function(t){document.removeEventListener("touchmove",a,!1),document.removeEventListener("touchend",s,!1),document.removeEventListener("touchcancel",s,!1),i&&e.picker.selV({realTarget:i})};document.addEventListener("touchmove",a,!1),document.addEventListener("touchend",s,!1),document.addEventListener("touchcancel",s,!1)},destroy:function(){this.picker.content.removeChild(this.main),this.picker=null,this.main=null,this.mainStyle=null,this.headActiveEle=null,this.activeEle=null,this.pickerLineEle=null}}),t.exports=n},function(t,e,i){function n(){a.apply(this,arguments)}var a=i(5),s=i(1),r=i(3),o=i(13),c=i(14);a.extend(n,{init:function(){this.needDefFormat&&(this.options.format="yyyy-MM-dd"),s.extend(this.options,{type:"M"}),this.panel=this.daysPanel=new o(this)},_setDateTime:function(){this.prevDateTime=new r(s.extend({},this.options,{"default":s.prevMonth(this.dateTime.now)})),this.nextDateTime=new r(s.extend({},this.options,{"default":s.nextMonth(this.dateTime.now)}))},initEle:function(){this.ele.classList.add("date-picker-container")},shouldSet:function(t){return!!t},setNowToPrev:function(){this.setNow(this.prevDateTime.now)},setNowToNext:function(){this.setNow(this.nextDateTime.now)},_to:function(t,e){s.extend(this.options,{type:t}),this.panel.hide(),this[e]?this[e].show():this[e]=new c(this),this.panel=this[e],this.setDateTime()},toYears:function(){this._to("C","yearsPanel")},toMonths:function(){this._to("Y","monthsPanel")},toDays:function(){this._to("M","daysPanel")}}),t.exports=n},function(t,e,i){function n(){a.apply(this,arguments)}var a=i(5),s=i(1),r=i(15);a.extend(n,{init:function(){this.needDefFormat&&(this.options.format="HH:mm");var t=this.options.minuteStep;t||(t=5),1!==t&&5!==t&&10!==t&&(t=5),s.extend(this.options,{type:"D",minuteStep:t}),this.panel=this.hoursPanel=new r(this)},initEle:function(){this.ele.classList.add("time-picker-container")},selV:function(t){var e=this;this["super"].selV.call(this,t),setTimeout(function(){e.toMinutes()})},selfChange:function(){this.panel.selfChange()},_to:function(t,e){this.options.type!==t&&(s.extend(this.options,{type:t}),this.panel.hide(),this[e]?this[e].show():this[e]=new r(this),this.panel=this[e],this.setDateTime())},toHours:function(){this._to("D","hoursPanel")},toMinutes:function(){this._to("H","minutesPanel")}}),t.exports=n}])});